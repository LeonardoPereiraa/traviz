language: dart
dist: xenial

addons:
  apt:
    packages:
    - lib32stdc++6
env:
  global:
    - ANDROID_SDK_ROOT=/opt/android
install:
- git clone https://github.com/flutter/flutter.git -b beta
- ./flutter/bin/flutter doctor
script:
# Setup gradle.
- wget https://services.gradle.org/distributions/gradle-4.10.3-bin.zip
- unzip -qq gradle-4.10.3-bin.zip
- export GRADLE_HOME=`pwd`/gradle-4.10.3
- export PATH=$GRADLE_HOME/bin:$PATH
# (Quick fix: Silence sdkmanager warning)
- mkdir -p /home/travis/.android
- echo 'count=0' > /home/travis/.android/repositories.cfg
# Download and setup Android SDK tools.
- wget https://dl.google.com/android/repository/sdk-tools-linux-4333796.zip
- mkdir android-sdk-tools
- unzip -qq sdk-tools-linux-4333796.zip -d android-sdk-tools
- export PATH=`pwd`/android-sdk-tools/tools/bin:$PATH
- mkdir -p $ANDROID_SDK_ROOT

- yes | sdkmanager --licenses
- yes | sdkmanager "emulator" "tools" "platform-tools" > /dev/null
- yes | sdkmanager "platforms;android-25" > /dev/null
- yes | sdkmanager "build-tools;25.0.2" > /dev/null
- yes | sdkmanager "system-images;android-25;google_apis;armeabi-v7a" > /dev/null
/dev/null


- ls
#- export PATH="$PATH:`pwd`/flutter/bin"
#- cd buspay
#- ls
#- flutter build apk
#- ../flutter/bin/flutter test
cache:
  directories:
  - $HOME/.pub-cachelanguage: dart
dist: xenial

addons:
  apt:
    packages:
    - lib32stdc++6
env:
  global:
    - ANDROID_SDK_ROOT=/opt/android
install:
- git clone https://github.com/flutter/flutter.git -b beta
- ./flutter/bin/flutter doctor
script:
# Setup gradle.
- wget https://services.gradle.org/distributions/gradle-4.10.3-bin.zip
- unzip -qq gradle-4.10.3-bin.zip
- export GRADLE_HOME=`pwd`/gradle-4.10.3
- export PATH=$GRADLE_HOME/bin:$PATH
# (Quick fix: Silence sdkmanager warning)
- mkdir -p /home/travis/.android
- echo 'count=0' > /home/travis/.android/repositories.cfg
# Download and setup Android SDK tools.
- wget https://dl.google.com/android/repository/sdk-tools-linux-4333796.zip
- mkdir android-sdk-tools
- unzip -qq sdk-tools-linux-4333796.zip -d android-sdk-tools
- export PATH=`pwd`/android-sdk-tools/tools/bin:$PATH
- mkdir -p $ANDROID_SDK_ROOT

- yes | sdkmanager --licenses
- yes | sdkmanager "emulator" "tools" "platform-tools" > /dev/null
- yes | sdkmanager "platforms;android-25" > /dev/null
- yes | sdkmanager "build-tools;25.0.2" > /dev/null
- yes | sdkmanager "system-images;android-25;google_apis;armeabi-v7a" > /dev/null
/dev/null


- ls
#- export PATH="$PATH:`pwd`/flutter/bin"
#- cd buspay
#- ls
#- flutter build apk
#- ../flutter/bin/flutter test
cache:
  directories:
  - $HOME/.pub-cache
